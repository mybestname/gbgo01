#  第一周：微服务（微服务概览与治理）

## 1.微服务概览

- 小即是美：代码少，bug少，易测试，易维护
- 单一职责：一个服务一件事
- 尽早协议：尽早提供API建立契约。
- 重可移植：效率 vs.可移植，首考兼容和移植。

### 要点
- 类依赖 -> 消息交互
- 不同语言解决不同问题（服务）：网关接口（go） vs. 计算密集（c++）
- 消息协议通用（不需要分别打造协议栈）RPC协议
- 原子服务
- 独立进程
- 隔离部署
- 去中心化服务治理

## 2.微服务设计 

- 网关层 (API Gateway)
  - BFF层 (Backend For Frontend)
- 服务层 (Microservice)

### 知识点
- 扇出 fan-out（一个请求上出很多个请求，并行地访问底层的RPC服务）

### 网关
- 避免客户端直接和内部直接通信，暴露的结果在于无法升级。
- 避免客户端来聚合数据。客户端会太重，无法快速迭代和交付。
- 避免客户端进行协议兼容。
- 避免内部去兼容客户端（第3点的反向）。导致面向外部的兼容耦合入业务逻辑。
- 避免内部去兼容客户端版本。导致内部升级困难（这个第1点已经说过）
- 某些统一性要求永远无法收敛。例如安全、限流。（因为对外暴露无法收敛）

#### BFF层
- BFF 可以认为是一种适配服务，将后端的微服务进行适配(主要包括聚合裁剪和格式适配等逻辑)，向无线端设备暴露友好和统一的API，方便无线设备接入访问后端服务。
- app-interface (非面向资源接口，面向资源接口适用于内网，而不适用于外网）
- data-set join

## 3.gRPC & 服务发现 

## 4.多集群 & 多租户 
